{% extends 'core/base.html' %}
{% load i18n %}

{% block title %}
    List of companies
{% endblock %}

{% block header %}
{#    <div class="header-company-list align-center">#}
{#        <h3 class="text-center">#}
{#            {% if header.type %}{% trans 'Type' %}: {{ header.type }}{% endif %}#}
{#            {% if header.location %}{% trans 'City' %}: {{ header.location }}{% endif %}#}
{#            {% if header.price %}{% trans 'Price' %}: {{ header.price }}{% endif %}#}
{#        </h3>#}
{##}
{#    </div>#}


<!-- FILTER -->
{% include 'company/include/form_filter.html' %}
{#    <h2 class="subheader">Тамада и ведущий на свадьбу{% if header %}: {{ header }}{% endif %}</h2>#}
{% endblock %}

{% block content %}
    <div class="grid-x grid-margin-y">
        {# HEADER #}
        <div class="cell small-12 medium-6 float-center">
            <h3 class="text-center">{% if header.type %}{{ header.type }}{% endif %}</h3>
            <h3 class="text-center">{% if header.location %}{{ header.location }}{% endif %}</h3>
            <h3 class="text-center">{% if header.price %}{{ header.price }}{% endif %}</h3>
        </div>
        {# LIST CARDS #}
        <div class="cell row small-12 medium-12 large-12">
            <div class="grid-margin-y">

                {# CARDS #}
                <div class="grid-container full">
                    <div class="grid-x grid-margin-x grid-margin-y">
                    {% for company in companies %}
                        <div class="cell small-6 medium-4 large-3 ">
                            <div class="float-center">
{#                                <div class=" thumbnail ">#}
                                    <a class="thumbnail-new" href="{% url 'company:company_detail' pk=company.id %}">
                                        <img class="float-center " src="{{ company.avatar.thumbnail.url }}">
                                        <h5 class="card-section text-center">{{ company.name|truncatechars:50 }}</h5>
                                    </a>

{#                                </div>#}
                            </div>
                        </div>
                    {% empty %}
                        <div class="float-center">Не найдено</div>
                    {% endfor %}
                    </div>
                </div>

                {# PAGINATION #}
                {% if page_obj.paginator.num_pages > 1 %}
                <nav class="cell" aria-label="Pagination">
                    <ul class="pagination text-center">
                        {% if page_obj.has_previous %}
                            <li class="pagination-previous">
                                <a href="?type_company={{ request.GET.type_company }}&location_select={{ request.GET.location_select }}&price={{ request.GET.price }}&page={{ page_obj.previous_page_number }}"
                                   aria-label="Previous page">{% trans "Previous" %} <span class="show-for-sr">page</span>
                                </a></li>
                            {% for page in page_obj.paginator.page_range|slice:page_dict.prev %}
                                <li><a {% if page_obj.number == page %} class="current" {% endif %}
                                                                        href="?type_company={{ request.GET.type_company }}&location_select={{ request.GET.location_select }}&price={{ request.GET.price }}&page={{ page }}"
                                >{{ page }}</a></li>
                            {% endfor %}
                        {% else %}
                            <li class="pagination-previous disabled">{% trans "Previous" %} <span class="show-for-sr"></span></li>
                        {% endif %}

                        <li><a class="current"
                               href="?type_company={{ request.GET.type_company }}&location_select={{ request.GET.location_select }}&price={{ request.GET.price }}&page={{ page_obj.number }}"
                        >{{ page_obj.number }}</a></li>

                        {% if page_obj.has_next %}
                            {% for page in page_obj.paginator.page_range|slice:page_dict.next %}
                                <li><a {% if page_obj.number == page %} class="current" {% endif %}
                                                                        href="?type_company={{ request.GET.type_company }}&location_select={{ request.GET.location_select }}&price={{ request.GET.price }}&page={{ page }}"
                                >{{ page }}</a></li>
                            {% endfor %}

                            <li class="pagination-next">
                                <a href="?type_company={{ request.GET.type_company }}&location_select={{ request.GET.location_select }}&price={{ request.GET.price }}&page={{ page_obj.next_page_number }}"
                                   aria-label="Next page">{% trans "Next" %} <span class="show-for-sr"></span></a></li>
                        {% else %}
                            <li class="pagination-next disabled">{% trans "Next" %} <span class="show-for-sr"></span></li>
                        {% endif %}
                    </ul>
                </nav>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}